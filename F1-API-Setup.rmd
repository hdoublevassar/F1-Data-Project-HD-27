---
title: "F1-API-Setup"
output: 
  html_document:
    code_folding: show
    theme:
      bg: "#202123"
      fg: "#B8BCC2"
      primary: "#EA80FC"
      base_font:
        google: Prompt
      heading_font:
        google: Proza Libre
      version: 3
---


```{r Libraries}
library(tidyverse)
library(ggplot2)
library(jsonlite)
library(httr)
```

#Using the OpenF1 API, this chunk aims to retreive data on F1 sessions, which will be filtered and used to iscolate perfomrance data.
```{r Sessions-API}
# Get all drivers for the session
#url <- "https://api.openf1.org/v1/drivers?session_key=9158" # nolint: commented_code_linter.

# For sessions:
url_sessions <- "https://api.openf1.org/v1/sessions"
# For meetings: url_meetings <- "https://api.openf1.org/v1/meetings"
# For positions: url_positions <- "https://api.openf1.org/v1/position?session_key=9158"
# For lap times: url_laps <- "https://api.openf1.org/v1/laps?session_key=9158"
# For car data: url_car_data <- "https://api.openf1.org/v1/car_data?session_key=9158"

resp <- httr::GET(url_sessions)
if (resp$status_code != 200) {
  stop("Request failed: ", resp$status_code, " â€” ", httr::content(resp, "text"))
}

text <- httr::content(resp, "text", encoding = "UTF-8")
session_data <- jsonlite::fromJSON(text, simplifyVector = TRUE)
print(session_data)
```

#Filtering down to just Race Sessions in the Year 2025
```{r Filter-Sessions}
##I am creating a new dataframe that filters the session_data dataframe, isolating just the session type and the year
race_sessions_2025 <- dplyr::filter(session_data, session_name == "Race", year == 2025) 


```