---
title: "Vignette Title"
author: "Vignette Author"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---
# Refined Cleaning Methods
```{r API-Setup, include=FALSE}
source("F1-API-Setup.r")
knitr::opts_chunk$set(error=FALSE)
```

## Session Iscolation
```{r Session-Iscolation}
race_sessions <- dplyr::filter(session_data, session_name == "Race")
race_sessions <- race_sessions[!duplicated(race_sessions$session_key),] #Just  procoutionary, in the current state, this does nothing
```

## Driver Data Cleanup
Cleaning up the driver data into a usable state prior to use
### Fixing Color Codes
```{r Color-Codes-Fixed}
driver_names$team_colour <- paste0("#", driver_names$team_colour)
```

### Filtering to Race Drivers Only
```{r Driver-Data}
race_drivers_all <- dplyr::filter(driver_names, session_key %in% race_sessions$session_key)
```

### Adding Driver Info
```{r Pitstop-Cleaning}
limited_drivers <- race_drivers_all %>%
  select(-c(meeting_key, session_key, broadcast_name, first_name, last_name)) %>%
  distinct(driver_number, .keep_all = TRUE)

pitstop_data <- pitstop_data %>%
  filter(!is.na(pit_duration)) %>%
  left_join(limited_drivers, by = "driver_number")
```

## Pitstop Data Cleaning
In this section I am cleaning the pitstop_data$pit_duration to remove na values, and outliers.
### Outlier Determination

```{r Removing-Na-Values}
pitstop_data <- pitstop_data %>%
  drop_na(pit_duration)

pitstop_data <- pitstop_data[pitstop_data$pit_duration <= 60,]
```
